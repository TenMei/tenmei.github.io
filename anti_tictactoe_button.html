<!DOCTYPE html>
<head>

<title>Anti Tic-Tac-Toe</title>

<style>
/* Main screen */

.main {
   max-width:650px;
   margin: auto;
   border: 3px solid green;
   padding: 10px;
}

.step {
   background-color:#80ffff;
   border-radius:10px;
   height:30px;
   width:60px;
}

table, th, td {
  border: 2px solid black;
  table-layout: fixed;
}

td {
  text-align: center;
  vertical-align: middle;
}
</style>

<meta charset="UTF-8">
</head>

<body>

<h1>Anti Tic-Tac-Toe</h1>

<button type="button" onclick="instructions()">Rules</button>

<select name="p1" id="p1">
  <option disabled>Player 1</option>
  <option value="human" selected="selected">Human</option>
  <option value="random">Random</option>
  <option value="weak">Weak A.I.</option>
  <option value="strong">Strong A.I.</option>
</select>

<select name="p2" id="p2">
  <option disabled>Player 2</option>
  <option value="human">Human</option>
  <option value="random">Random</option>
  <option value="weak" selected="selected">Weak A.I.</option>
  <option value="strong">Strong A.I.</option>
</select>

<button type="button" onclick="main_start_game()">Go!</button>


<p style='font-size: 2em' id='text'>
Select options and click 'Go' to start.</p>

<table id="main">
</table>

<script>

// --------------------- All code below ---------------------------

// Basic functionality

function instructions() {
   var text = "Instructions: whoever makes 3-in-a-row loses. 'X' starts first. If 'X' gets 3-in-a-row, 'O' must";
   text += " make one more final move. If 'O' gets 3-in-a-row in this final move, it is a draw. Otherwise, ";
   text += "'O' wins.";

   alert(text);
}

// --------------- Routines for drawing ---------------------------

// Draw the main board

function draw_board() {
   var table = document.getElementById('main');
   var row, cell, button;
   
   // Clear all graphical elements in SVG.
   
   while (table.rows.length > 0) {
      table.deleteRow(0);
   }
   
   // Draw 25 squares.
  
   for (m = 0; m < 25; m++) {
      j = Math.floor(m / 5);
      i = m % 5;
      
      if (i == 0)
         row = table.insertRow(j);
         
      cell = row.insertCell(i);
      button = document.createElement('input');
      button.type = 'button';
      button.onclick = '';
      button.id = m;
      button.style.padding = '0';
      button.style.width = '120px';
      button.style.height = '120px';
      button.style.fontSize = '110px';
      
      cell.appendChild(button);
   }
   
}

// Add a cross to square m

function draw_X(m) {
   var i;
   
   for(i=0; i<25; i++)
      document.getElementById(i).style.backgroundColor = 'white';

   document.getElementById(m).value = 'X';
   document.getElementById(m).style.backgroundColor = 'yellow';
   document.getElementById(m).style.color = 'red';
} 

// Add circle to square m

function draw_O(m) {
   var i;
   
   for(i=0; i<25; i++)
      document.getElementById(i).style.backgroundColor = 'white';

   document.getElementById(m).value = 'O';
   document.getElementById(m).style.backgroundColor = 'yellow';
   document.getElementById(m).style.color = 'blue';
}

// --------------------- Misc code ----------------------------------------------

// Random integer from a to b inclusive.

function randint(a, b) {
   return Math.floor(Math.random() * (b-a+1)) + a;
}

// Random choice from a list.

function choice(seq) {
   return seq[randint(0, seq.length - 1)];
}

// --------------------- Game class ----------------------------------------------

// Class which handles the game.

class Game {

   // Init the game with the board, and two players.

   constructor(board, player1, player2) {
      this._board = board;
      this._player1 = player1;
      this._player2 = player2;
   }
      
   // Play alternates between two players, without displaying.

   play(player) {
   
      while (this._board.status() == 0) {
         var next_player = [this._player1, this._player2][player - 1];
         var action = next_player.find_move(player, this._board);
      
         this._board.make_action(player, action);
         player = 3 - player;
      }
         
      return this._board.status();
   }
}


function main_start_game() {
   // Update 1
	
   draw_board();
	
   var p1 = document.getElementById('p1').selectedIndex;
   var p2 = document.getElementById('p2').selectedIndex;
   
   main_board = new TicTacToe();
   main_curr_player = 1;
   
   if (p1 == 1)
      main_player1 = new Human();
   else if (p1 == 2) 
      main_player1 = new Random();
   else if (p1 == 3)
      main_player1 = new MCTS(500, 10);
   else if (p1 == 4)
      main_player1 = new MCTS(30000, 10);
   
   if (p2 == 1)
      main_player2 = new Human();
   else if (p2 == 2) 
      main_player2 = new Random();
   else if (p2 == 3)
      main_player2 = new MCTS(500, 10);
   else if (p2 == 4)
      main_player2 = new MCTS(30000, 10);
   
   setTimeout(main_play_move, 0);
}


</script>

</body>


</html>
